<!DOCTYPE>
<html>
    <head>
        <title>MtGox trades</title>
        <script src="https://socketio.mtgox.com/socket.io/socket.io.js"></script>
    </head>
    
    <body>
        <table id="trades">
            <tr>
                <th>Type</th>
                <th>#</th>
                <th>Of</th>
                <th>@</th>
                <th>Of</th>
            </tr>
        </table>
        
        <script>
            var con = io.connect('https://socketio.mtgox.com/mtgox');
            console.log('Started...');
            
            con.on('message', function(d) {
                if (d.op = 'private' && d.private == 'trade') {
                    var td1 = document.createElement('td');
                    var td2 = document.createElement('td');
                    var td3 = document.createElement('td');
                    var td4 = document.createElement('td');
                    var td5 = document.createElement('td');
                    
                    td1.textContent = d.trade.trade_type + ', ' + d.trade.properties;
                    td2.textContent = d.trade.amount_int;
                    td3.textContent = d.trade.item;
                    td4.textContent = d.trade.price_int;
                    td5.textContent = d.trade.price_currency;
                    
                    var tr = document.createElement('tr');
                    
                    tr.appendChild(td1);
                    tr.appendChild(td2);
                    tr.appendChild(td3);
                    tr.appendChild(td4);
                    tr.appendChild(td5);
                    
                    document.getElementById('trades').appendChild(tr);
                    //console.log('[' + d.trade.trade_type + ' ' + d.trade.amount + d.trade.item + '@' + d.trade.price + d.trade.price_currency + ', ' + d.trade.properties + ']');
                }
            });
        </script>
    </body>
</html>